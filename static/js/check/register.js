"use strict";define("checkRegister",["jquery"],function(e){return avalon.define({$id:"checkRegister",email:"",nickname:"",password:"",passwordRepeat:"",capid:"",cap:"",stepList:["填写信息","邮箱验证","完成"],step:0,jumpStep:function(e){avalon.vmodels.checkRegister.step=e},onChange:function(){avalon.vmodels.checkRegister.freshCap()},freshCap:function(){post("/api/freshCap",null,null,null,function(e){avalon.vmodels.checkRegister.capid=e})},onAfterLoad:function(){e(window).keydown(function(e){13==e.keyCode&&avalon.vmodels.checkRegister.submit()}),e("#check-register #email").focus()},submit:function(){return""==avalon.vmodels.checkRegister.email?void notice("邮箱不能为空","red"):""==avalon.vmodels.checkRegister.nickname?void notice("昵称不能为空","red"):""==avalon.vmodels.checkRegister.password?void notice("密码不能为空","red"):""==avalon.vmodels.checkRegister.passwordRepeat||avalon.vmodels.checkRegister.passwordRepeat!=avalon.vmodels.checkRegister.password?void notice("重复密码不正确","red"):void post("/api/check/register",{email:avalon.vmodels.checkRegister.email,nickname:avalon.vmodels.checkRegister.nickname,password:avalon.vmodels.checkRegister.password,capid:avalon.vmodels.checkRegister.capid,cap:avalon.vmodels.checkRegister.cap},"注册信函已发送","",function(){avalon.vmodels.checkRegister.freshCap(),avalon.vmodels.checkRegister.cap="",avalon.vmodels.checkRegister.step=1},function(){avalon.vmodels.checkRegister.freshCap(),avalon.vmodels.checkRegister.cap=""})},$skipArray:["onChange","onAfterLoad"]})});