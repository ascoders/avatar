"use strict";define("oauth",["jquery"],function(o){return avalon.define({$id:"oauth",info:"验证请求中..",onChange:function(n){post("/api/check/getToken",{code:n.query.code,state:n.query.state},null,"",function(n){avalon.vmodels.oauth.info="验证成功，正在从github获取信息..";var a=n.match(/access_token=([^&]+)/)[1];o.get("https://api.github.com/user?access_token="+a,function(o){avalon.vmodels.oauth.info="信息获取完毕，处理中..",post("/api/check/register",{nickname:o.name,image:o.avatar_url,token:a,login:o.login},null,"",function(o){avalon.vmodels.global.my=o,avalon.vmodels.global.myLogin=!0,avalon.router.navigate("/")})})})},onAfterLoad:function(){},$skipArray:["onChange","onAfterLoad"]})});